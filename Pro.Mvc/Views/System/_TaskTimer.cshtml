@model Pro.Mvc.Models.EditTaskModel
@{
   
    //ViewBag.Title = "System";
    Layout = "~/Views/Shared/_ViewIframe.cshtml";
    //int rcdid = Nistec.Types.ToInt(Request["taskid"]);
    //int id = Nistec.Types.ToInt(Request["id"]);
    var dataModel = @Html.Raw(Json.Encode(Model));
    var userInfo = @Html.Raw(Json.Encode(ViewBag.UserInfo));

}

@section head {

    @Scripts.Render("~/bundles/jqx")
    @Scripts.Render("~/bundles/jqxgrid")
    <script type="text/javascript" src="~/jqwidgets/jqxdata.export.js"></script>
    <script type="text/javascript" src="~/Scripts/app/system/task-items.js"></script>
    <script type="text/javascript" src="~/Scripts/app/app-jqx-grid-1.0.js?ver=20180001"></script>

    <style type="text/css">
        input {
            direction: rtl;
            text-align: right;
        }
        /*.pasive {display:none;}*/
    </style>
}


@section scripts {

    <script type="text/javascript">

    //var NScustomers = {};
    //var timer_grid;
    var timer_def;

    $(document).ready(function () {
        JSON.useDateParser();
        var theme = 'Arctic';
        var model = JSON.parse('@dataModel');
                
        //if (model.Option == 'a')
        //    $('.edit').css('display','none')

        timer_def = new app_tasks_timer_def(model, JSON.parse('@userInfo'));

        $('#reset').on('click', function () {
            location.reload();
        });

        $('#fcSubmit').on('click', function (e) {
            e.preventDefault();
            timer_def.doSubmit();
        });

        $('#fcClear').on('click', function (e) {
            $('#fcForm')[0].reset();
            $('#fcForm').jqxValidator('hide');
        });

        $('#fcCancel').on('click', function (e) {
            timer_def.doCancel();
        });

    });

    //function triggerTaskCompleted(id) {
    //    $("#jqxgrid").jqxGrid('source').dataBind();
    //    $("#divPartial").html('');
    //    //app_dialog.dialogIframClose();
    //};
    //function triggerSubmit() {
    //    timer_def.doSubmit();
    //}

</script>
}

<div style="margin: 0px;">
    <div class="container">
            @*<h3 class="rtl">הערה</h3>*@
            <div id="jqxWidget" style="margin: 0 auto; display: block; direction: rtl">
                <div id="fcWindow">
                    <div id="fcHeader">
                        <span id="fcTitle" style="font-weight: bold;">מעקב זמנים</span>
                    </div>
                    <div id="fcBody">
                        <form class="fcForm" id="fcForm" method="post" action="/System/TaskTimerUpdate">
                            <div style="direction: rtl; text-align: right">
                                <input type="hidden" id="TaskTimerId" name="TaskTimerId" value="0" />
                                <input type="hidden" id="Task_Id" name="Task_Id" value="0" />
                                <input type="hidden" id="UserId" name="UserId" value="" />
                                <div style="height:5px"></div>
                                <div id="tab-content" class="tab-content" dir="rtl">
                                    <div class="form-group @(Model.Option == "a" ? "pasive" : null)">
                                        <div class="field">
                                            סדר:
                                        </div>
                                        <input id="SubIndex" name="SubIndex" type="number" readonly="readonly" class="text-mid" />
                                    </div>
                                    <div class="form-group">
                                        <div class="field">
                                            נושא:
                                        </div>
                                        <textarea id="Subject" name="Subject" class="text-content-mid"></textarea>
                                    </div>
                                    <div class="form-group @(Model.Option == "a" ? "pasive" : null)">
                                        <div class="field">
                                            מועד התחלה:
                                        </div>
                                        <div id="StartTime" name="StartTime"></div>
                                    </div>
                                    <div id="divEndTime" class="form-group @(Model.Option == "a" ? "pasive" : null)">
                                        <div class="field">
                                            מועד סיום:
                                        </div>
                                        <div id="EndTime" name="EndTime"></div>
                                    </div>
                                    <div id="divDuration" class="form-group @(Model.Option == "a" ? "pasive" : null)">
                                        <div class="field">
                                            משך זמן:
                                        </div>
                                        <input id="Duration" name="Duration" type="number" readonly="readonly" class="text-mid" />
                                    </div>
                                    <div class="form-group @(Model.Option == "a" ? "pasive" : null)">
                                        <div class=" field">
                                        נוצר ע"י:
                                    </div>
                                        <input id="DisplayName" name="DisplayName" type="text" readonly="readonly" class="text-mid" />
                                    </div>
                                </div>
                                <div>
                                    <a id="fcSubmit" class="btn-default btn7 w-60" href="#">עדכון</a>
                                    <a id="fcCancel" class="btn-default btn7 w-60" href="#">ביטול</a>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

            </div>
    </div>
</div>
        <!--end of content-wrapper-->

