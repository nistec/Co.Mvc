@model Pro.Mvc.Models.EditTaskModel
@{
   
    //ViewBag.Title = "System";
    Layout = "~/Views/Shared/_ViewIframe.cshtml";
    //int rcdid = Nistec.Types.ToInt(Request["taskid"]);
    //int id = Nistec.Types.ToInt(Request["id"]);
    var dataModel = @Html.Raw(Json.Encode(Model));
    var userInfo = @Html.Raw(Json.Encode(ViewBag.UserInfo));

}

@section head {

    @Scripts.Render("~/bundles/jqx")
    @Scripts.Render("~/bundles/jqxgrid")
    <script type="text/javascript" src="~/jqwidgets/jqxdata.export.js"></script>
    <script type="text/javascript" src="~/Scripts/app/system/task-items.js"></script>
    <script type="text/javascript" src="~/Scripts/app/app-jqx-grid-1.0.js"></script>

    <style type="text/css">
        input {
            direction: rtl;
            text-align: right;
        }

        /*.jqx-grid-cell {
            border: none;
        }

        .wiz-tab {
            display: none;
        }

            .wiz-tab.active {
                display: block;
            }*/
    </style>
}


@section scripts {

    <script type="text/javascript">

    //var NScustomers = {};
    //var comment_grid;
        var comment_def;

    $(document).ready(function () {
        JSON.useDateParser();
        var theme = 'Arctic';
        var model = JSON.parse('@dataModel');

        comment_def = new app_tasks_comment_def(model, JSON.parse('@userInfo'));

        $('#reset').on('click', function () {
            location.reload();
        });

        $('#comment-Submit').on('click', function (e) {
            e.preventDefault();
            comment_def.doSubmit();
        });
        $('#comment-Cancel').on('click', function (e) {
            comment_def.doCancel();
        });

        $('#comment-Clear').on('click', function (e) {
            $('#comment-Form')[0].reset();
            $('#comment-Form').jqxValidator('hide');
        });
    });

   
    //function triggerTaskCompleted(id) {
    //    $("#jqxgrid").jqxGrid('source').dataBind();
    //    $("#divPartial").html('');
    //    //app_dialog.dialogIframClose();
    //};
    //function triggerSubmit() {
    //    comment_def.doSubmit();
    //}

</script>
}

<div style="margin: 0px;">
    <div class="container">
            @*<h3 class="rtl">הערה</h3>*@
            <div id="jqxWidget" style="margin: 0 auto; display: block; direction: rtl">
                <div id="comment-Window">
                    <div id="comment-Header">
                        <span id="comment-Title" style="font-weight: bold;">מעקב טיפול</span>
                    </div>

                    <div id="fcBody">
                        <form class="fcForm" id="comment-Form" method="post" action="/System/TaskCommentUpdate">
                            <div style="direction: rtl; text-align: right">
                                <input type="hidden" id="CommentId" name="CommentId" value="0" />
                                <input type="hidden" id="Task_Id" name="Task_Id" value="0" />
                                <input type="hidden" id="UserId" name="UserId" value="" />
                                <div style="height:5px"></div>
                                <div id="tab-content" class="tab-content" dir="rtl">
                                    <div class="form-group">
                                        <div class="field">
                                            הערה:
                                        </div>
                                        <textarea id="CommentText" name="CommentText" class="text-content-mid"></textarea>
                                    </div>
                                    <div class="form-group">
                                        <div class="field">
                                            תזכורת ל:
                                        </div>
                                        <div id="ReminderDate" name="ReminderDate"></div>
                                    </div>
                                    <div class="form-group @(Model.Option == "a" ? "pasive" : null)">
                                        <div class="field">
                                            נוצר ב:
                                        </div>
                                        <input id="CommentDate" name="CommentDate" type="text" readonly="readonly" class="text-mid" />
                                    </div>
                                    <div class="form-group @(Model.Option == "a" ? "pasive" : null)">
                                        <div class="field">
                                            נוצר ע"י":
                                        </div>
                                        <input id="DisplayName" name="DisplayName" type="text" readonly="readonly" class="text-mid" />
                                    </div>
                                </div>
                                <div>
                                    <a id="comment-Submit" class="btn-default btn7 w-60" href="#">עדכון</a>
                                    <a id="comment-Cancel" class="btn-default btn7 w-60" href="#">ביטול</a>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

            </div>
    </div>
</div>
        <!--end of content-wrapper-->

