@{

    //ViewBag.Title = "System";
    Layout = "~/Views/Shared/_ViewIframe.cshtml";
    int rcdid = Nistec.Types.ToInt(Request["id"]);
    var userInfo = @Html.Raw(Json.Encode(ViewBag.UserInfo));

}

@section head {

    @Scripts.Render("~/bundles/jqx")
    @Scripts.Render("~/bundles/jqxgrid")
    <script type="text/javascript" src="~/jqwidgets/jqxdata.export.js"></script>
    <script type="text/javascript" src="~/Scripts/app/system/tasks-def.js"></script>
    <script type="text/javascript" src="~/Scripts/app/app-jqx-grid.js"></script>

    <style type="text/css">
        input {
            direction: rtl;
            text-align: right;
        }

        .jqx-grid-cell {
            border: none;
        }

        .wiz-tab {
            display: none;
        }

            .wiz-tab.active {
                display: block;
            }
    </style>
}


@section scripts {

    <script type="text/javascript">

    //var NScustomers = {};
        var comment_grid;
   //var wizard;

    $(document).ready(function () {
        JSON.useDateParser();
        var theme = 'Arctic';
        var taskid=@rcdid
        //wizard = new app_wiztabs();
        //wizard.displayStep(0);

        comment_grid = app_tasks_comment.load(taskid, JSON.parse('@userInfo'));

        app_jqxgrid.gridFilterRtl(this, $("#grid-toolbar"), columnList, dateList);

    });

    function triggerTaskCompleted(id) {
        $("#jqxgrid").jqxGrid('source').dataBind();
        $("#divPartial").html('');
        //app_dialog.dialogIframClose();
    };


    var columnList = [
     { label: 'מספר משימה', value: 'TaskId', checked: false },
     { label: 'סוג משימה', value: 'TaskTypeName', checked: false },
     { label: 'פרוייקט', value: 'ProjectName', checked: false },
     { label: 'סטאטוס', value: 'StatusName', checked: false },
     { label: 'נושא', value: 'TaskSubject', checked: false }
    ];
    var dateList = [
     { label: 'מועד לביצוע', value: 'DueDate', checked: false },
     { label: 'מועד רישום', value: 'CreatedDate', checked: false },
     { label: 'מועד התחלה', value: 'StartedDate', checked: false },
     { label: 'מועד סיום', value: 'EndedDate', checked: false },
     { label: 'מועד התחלה משוער', value: 'EstimateStartTime', checked: false }
    ];

    </script>
}

    <div class="container10" style="margin:0">
        <h3 class="rtl">הערות</h3>
        <div class="grid-wrap rtl">
            <div id="grid-toolbar" class="grid-toolbar"></div>
            <div id="jqxWidget">
                <div id="jqxgrid" style="position:relative;z-index:1;"></div>
            </div>
        </div>
    </div>
        <!--end of content-wrapper-->

