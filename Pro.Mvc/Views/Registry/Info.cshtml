@using CaptchaMvc.HtmlHelpers
@using CaptchaMvc;

@model Pro.Data.Registry.RegistryPage
@{
    Layout = "~/Views/Shared/_ViewRegistry.cshtml";
    //var captcha = Html.Captcha("רענון", "נא להקליד את התוים שבציור", 4, "נדרש להקליד את התוים שבציור.", false);
    var captcha = Html.Captcha("רענון","",4);
}

@section head {
    @Scripts.Render("~/bundles/jqx")
<link rel="stylesheet" href="~/Content/css/reset.css">
<link rel="stylesheet" href="~/Content/css/style.css">
<style type="text/css">
    .form {
        max-width: 420px;
        margin: auto;
        padding: 0.5em;
    }

    .rtl {
        direction: rtl;
        text-align: right;
    }

    input {
        text-align:center;
        font-size:120%;
    }
</style>

    @Html.Raw(Model.HScript)
}

@section scripts {
    <script type="text/javascript">
    $(document).ready(function () {
        @*var def = new app_signup_def(JSON.parse('@Model.AccountId'));*@

        $('#accSubmit').on('click', function (e) {
            //if (!checkform(this)) {
            //    alert('not valid');
            //    return;
            //}

            
            $("#accForm").submit();
           
            @*var id = $("#MemberId").val();
                app_iframe.attachIframe('iframe-info', '/Registry/_MemberInfo?mid=' + id + '&accid=@Model.AccountId', '100%', '350px', true);*@
        });
    });
    </script>

<script type="text/javascript">


    //Created / Generates the captcha function    
    function DrawCaptcha() {
        var a = Math.ceil(Math.random() * 10) + '';
        var b = Math.ceil(Math.random() * 10) + '';
        var c = Math.ceil(Math.random() * 10) + '';
        var d = Math.ceil(Math.random() * 10) + '';
        var e = Math.ceil(Math.random() * 10) + '';
        var f = Math.ceil(Math.random() * 10) + '';
        var g = Math.ceil(Math.random() * 10) + '';
        var code = a + ' ' + b + ' ' + ' ' + c + ' ' + d + ' ' + e + ' ' + f + ' ' + g;
        document.getElementById("txtCaptcha").value = code
    }

    // Validate the Entered input aganist the generated security code function   
    function ValidCaptcha() {
        var str1 = removeSpaces(document.getElementById('txtCaptcha').value);
        var str2 = removeSpaces(document.getElementById('txtInput').value);
        if (str1 == str2) return true;
        return false;

    }

    // Remove the spaces from the entered and generated code
    function removeSpaces(string) {
        return string.split(' ').join('');
    }
    //DrawCaptcha();

</script>


@Html.Raw(Model.HiddenScript)

}

    <div id="cmsHeader">
        @Html.Raw(Model.Header)
    </div>
@Html.ValidationSummary(true)

<div class="container">
    <div class="row">
        <div class="col-lg-12">
            <div id="accHeader">
                <h4 id="accTitle" style="font-weight: bold;">@Model.Title</h4>
            </div>
            
            <div id="accBody">
                <form class="accForm" id="accForm" method="post" action="/Registry/MemberInfo">
                    @*@Html.AntiForgeryToken()*@
                    <div style="direction: rtl; text-align: center">
                        <input type="hidden" id="AccountId" name="AccountId" value="@Model.AccountId" />
                        <input type="hidden" id="Folder" name="Folder" value="@Model.Folder" />
                        <div id="tab-personal">
                            <div class="form-group">
                                <div class="column">
                                </div>
                                <div id="cmsPh1">
                                    @Html.Raw(Model.Ph1)
                                </div>
                                <input id="MemberId" name="MemberId" type="text" class="text-mid" />
                            </div>
                        </div>
                        <div style="height: 2px"></div>
                        <div>

                            @*<input type="text" id="txtCaptcha"
                           style="background-image:url(1.jpg); text-align:center; border:none;
                            font-weight:bold; font-family:Modern" disabled />
                    <input type="button" id="btnrefresh" value="Refresh" onclick="DrawCaptcha();" />
                    <input type="text" id="txtInput" />*@
                            @captcha
                            @*@Html.ValidationMessage(captcha.BuildInfo.InputElementId)*@
                            @*@Html.Captcha(4)*@

                            <p class="Error">  @ViewBag.ErrMessage </p>
                            <div style="height: 2px"></div>
                            <input id="accSubmit" class="btn-default btn7" type="button" value="הצג" />
                        </div>
                    </div>
                </form>
            </div>
            @*<div id="jqxWidget">
                <div id="datatable" style="width:100%;height:200px">
                    <iframe id="iframe-info" frameborder="0" marginwidth="0" marginheight="0" allowfullscreen></iframe>
                </div>
            </div>*@
                
                <div id="cmsPh3">
                    @Html.Raw(Model.Ph3)
                </div>

            </div>
    </div>
</div>

<!--end of content-wrapper-->

    <div id="cmsFooter">
        @Html.Raw(Model.Footer)
    </div>

