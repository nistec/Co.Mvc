@model Pro.Lib.Query.PaymentQuery
@{
    Layout = "~/Views/Shared/_View.cshtml";
    ViewBag.Title = "PaymentsReport";
    //int acctype = Nistec.Types.ToInt(Request.QueryString["acctype"]);
    var dataModel = @Html.Raw(Json.Encode(Model));
    var userInfo = @Html.Raw(Json.Encode(ViewBag.UserInfo));
}

@section head { 

    @Scripts.Render("~/bundles/jqx")
    @Scripts.Render("~/bundles/jqxgrid")
    <script type="text/javascript" src="~/jqwidgets/jqxdata.export.js"></script>
    <script type="text/javascript" src="~/Scripts/app/main/payments-grid.js"></script>
    <script type="text/javascript" src="~/Scripts/app/app-jqx-grid-1.0.js"></script>

    <style type="text/css">
        input {
            direction:rtl;text-align:right;
        }
    </style>
}


@section scripts {

    <script type="text/javascript">

    //var NScustomers = {};
    var members_grid;

    $(document).ready(function () {
        JSON.useDateParser();

        app_payments_grid.load(JSON.parse('@dataModel'), JSON.parse('@userInfo'));
        app_jqxgrid.gridFilterEx(this, $("#grid-toolbar"), columnList, dateList);

    });
        
        //function triggerMemberComplete(memid) {
        //    $("#jqxgrid").jqxGrid('source').dataBind();
        //    app_dialog.dialogIframClose();
        //};

        var columnList = [
       { label: 'ת.ז המנוי', value: 'MemberId', checked: false },
       { label: 'שם המנוי', value: 'MemberName', checked: false },
       { label: 'טלפון נייד', value: 'CellPhone', checked: false },
       { label: 'תוקף', value: 'ValidityMonth', checked: true },
       //{ label: 'המשלם', value: 'CreditCardOwner', checked: true },
       //{ label: 'חיוב חוזר', value: 'AutoCharge', checked: true },
       { label: 'קמפיין', value: 'CampaignName', checked: true },
       //{ label: 'מזהה רישום', value: 'SignKey', checked: false },
       { label: 'סכום ששולם', value: 'Payed', checked: false },
       //{ label: 'קוד אישור תשלום', value: 'ConfirmationCode', checked: false },
       { label: 'מספר קבלה', value: 'PayId', checked: true }
        ];
        var dateList = [
         { label: 'מועד רישום', value: 'SignupDate', checked: false },
         { label: 'תאריך תפוגה', value: 'ExpirationDate', checked: false },
         { label: 'תאריך תשלום', value: 'PayedDate', checked: false }
        ];
       
    </script>
}

<div class="breadcrumbs">
</div>


@*<div class="top-space"></div>*@

<div class="global-view">
    <div class="container">
        <h3 class="rtl">@Model.HTitle</h3>
        <div class="grid-wrap rtl">
            <div id="grid-toolbar" class="grid-toolbar"></div>
            <div id="jqxWidget">
                <div id="jqxgrid" style="position:relative;z-index:1;"></div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    app_menu.activeLayoutMenu("liMain");
    app_menu.breadcrumbs("Main", "Payments", 'en');
</script>

